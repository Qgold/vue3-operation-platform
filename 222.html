<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D数字化转型项目蓝图</title>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #000428, #004e92);
            color: white;
            overflow: hidden;
            height: 100vh;
        }
        
        #container {
            position: relative;
            width: 100%;
            height: 100vh;
        }
        
        #canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .overlay {
            position: absolute;
            top: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            z-index: 10;
            pointer-events: none;
        }
        
        .header-top {
            display: flex;
            justify-content: center;
            gap: 4rem;
            margin-bottom: 1rem;
        }
        
        .header-top span {
            font-size: 1.2rem;
            color: #a0d2ff;
            text-shadow: 0 0 10px rgba(0, 195, 255, 0.7);
        }
        
        .main-title {
            font-size: 1.8rem;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 15px rgba(0, 195, 255, 0.8);
            margin-bottom: 2rem;
        }
        
        .project-panel {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            max-width: 900px;
            z-index: 10;
            pointer-events: none;
        }
        
        .project-item {
            background: rgba(6, 41, 66, 0.7);
            border: 1px solid rgba(0, 162, 255, 0.4);
            border-radius: 8px;
            padding: 0.8rem;
            width: 200px;
            box-shadow: 0 0 15px rgba(0, 162, 255, 0.3);
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
            opacity: 0.8;
        }
        
        .project-item.highlight {
            opacity: 1;
            box-shadow: 0 0 20px rgba(0, 162, 255, 0.8);
            transform: translateY(-5px);
        }
        
        .project-code {
            font-weight: bold;
            color: #4dc3ff;
            margin-bottom: 0.3rem;
            font-size: 1.1rem;
        }
        
        .project-name {
            font-size: 0.85rem;
            line-height: 1.4;
        }
        
        .info-box {
            position: absolute;
            background: rgba(6, 41, 66, 0.9);
            border: 1px solid rgba(0, 162, 255, 0.6);
            border-radius: 8px;
            padding: 1rem;
            max-width: 300px;
            box-shadow: 0 0 20px rgba(0, 162, 255, 0.5);
            backdrop-filter: blur(5px);
            z-index: 100;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .info-box.visible {
            opacity: 1;
        }
        
        .info-title {
            font-weight: bold;
            color: #4dc3ff;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        
        .info-content {
            font-size: 0.9rem;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <div id="container">
        <canvas id="canvas"></canvas>
        
        <div class="overlay">
            <div class="header-top">
                <span>员工分布</span>
                <span>待办事项</span>
            </div>
            <h1 class="main-title">人力资源运营模式转型项目群(国内外)</h1>
        </div>
        
        <div class="project-panel">
            <div class="project-item" data-project="P1">
                <div class="project-code">P1: 一体化BOM平台建设项目</div>
            </div>
            <div class="project-item" data-project="P2">
                <div class="project-code">P2: 产销存一体化实施</div>
            </div>
            <div class="project-item" data-project="P3">
                <div class="project-code">P3: 海外一体化运营平台</div>
            </div>
            <div class="project-item" data-project="P4">
                <div class="project-code">P4: (ERP+CRM+WMS)全球点亮工程</div>
            </div>
            <div class="project-item" data-project="P5">
                <div class="project-code">P5: 产品/物料/备件数据专项提升项目</div>
            </div>
            <div class="project-item" data-project="P6">
                <div class="project-code">P6: ERP等核心系统优化建设与运维</div>
            </div>
            <div class="project-item" data-project="P7">
                <div class="project-code">P7: 人力资源运营模式转型项目群(国内外)</div>
            </div>
        </div>
        
        <div id="infoBox" class="info-box">
            <div class="info-title" id="infoTitle">项目信息</div>
            <div class="info-content" id="infoContent">选择项目查看详细信息</div>
        </div>
    </div>

    <script>
        // 项目数据
        const projects = [
            { 
                code: 'P1', 
                name: '一体化BOM平台建设项目',
                description: '构建统一物料清单管理平台，实现产品数据全生命周期管理',
                angle: 0,
                radius: 2.5
            },
            { 
                code: 'P2', 
                name: '产销存一体化实施',
                description: '实现生产、销售和库存一体化管理，优化供应链效率',
                angle: 51.4,
                radius: 2.5
            },
            { 
                code: 'P3', 
                name: '海外一体化运营平台',
                description: '建立海外业务统一运营管理系统，支持全球化业务扩展',
                angle: 102.8,
                radius: 2.5
            },
            { 
                code: 'P4', 
                name: '(ERP+CRM+WMS)全球点亮工程',
                description: '全球ERP、CRM和WMS系统实施项目，实现业务流程标准化',
                angle: 154.2,
                radius: 2.5
            },
            { 
                code: 'P5', 
                name: '产品/物料/备件数据专项提升项目',
                description: '优化产品、物料和备件数据管理体系，提高数据质量',
                angle: 205.6,
                radius: 2.5
            },
            { 
                code: 'P6', 
                name: 'ERP等核心系统优化建设与运维',
                description: '核心系统性能优化与运维保障，提升系统稳定性和性能',
                angle: 257,
                radius: 2.5
            },
            { 
                code: 'P7', 
                name: '人力资源运营模式转型项目群(国内外)',
                description: '全球人力资源运营模式转型与优化，提升人力资源管理效率',
                angle: 308.4,
                radius: 2.5
            }
        ];

        // 初始化Three.js场景
        let scene, camera, renderer, controls;
        let earth, orbits = [];
        let projectNodes = [];
        let connectionLines = [];
        let raycaster, mouse;
        let hoveredObject = null;
        
        // 初始化函数
        function init() {
            // 创建场景
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000428);
            
            // 创建相机
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 7;
            
            // 创建渲染器
            renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('canvas'), antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            
            // 添加轨道控制
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.minDistance = 4;
            controls.maxDistance = 15;
            
            // 初始化光线投射和鼠标对象
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();
            
            // 添加光源
            const ambientLight = new THREE.AmbientLight(0x404040);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 3, 5);
            scene.add(directionalLight);
            
            const pointLight = new THREE.PointLight(0x4dc3ff, 1, 100);
            pointLight.position.set(0, 0, 5);
            scene.add(pointLight);
            
            // 创建地球
            createEarth();
            
            // 创建轨道
            createOrbits();
            
            // 创建项目节点
            createProjectNodes();
            
            // 创建连接线
            createConnectionLines();
            
            // 添加星星背景
            createStarBackground();
            
            // 添加事件监听器
            window.addEventListener('resize', onWindowResize);
            renderer.domElement.addEventListener('mousemove', onMouseMove);
            renderer.domElement.addEventListener('click', onMouseClick);
            
            // 开始动画
            animate();
        }
        
        // 创建地球
        function createEarth() {
            const geometry = new THREE.SphereGeometry(1, 32, 32);
            const material = new THREE.MeshPhongMaterial({
                color: 0x0a4a6d,
                specular: 0x4dc3ff,
                shininess: 30,
                emissive: 0x083c5d
            });
            
            earth = new THREE.Mesh(geometry, material);
            scene.add(earth);
            
            // 添加地球网格线
            const wireframe = new THREE.WireframeGeometry(geometry);
            const line = new THREE.LineSegments(wireframe);
            line.material.color.set(0x4dc3ff);
            line.material.transparent = true;
            line.material.opacity = 0.3;
            earth.add(line);
        }
        
        // 创建轨道
        function createOrbits() {
            const orbitGeometry = new THREE.RingGeometry(2.2, 2.3, 64);
            const orbitMaterial = new THREE.MeshBasicMaterial({ 
                color: 0x4dc3ff, 
                side: THREE.DoubleSide,
                transparent: true,
                opacity: 0.2
            });
            
            for (let i = 0; i < 3; i++) {
                const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
                orbit.rotation.x = Math.PI / 2;
                orbit.scale.set(1 + i * 0.2, 1 + i * 0.2, 1);
                scene.add(orbit);
                orbits.push(orbit);
            }
        }
        
        // 创建项目节点
        function createProjectNodes() {
            projects.forEach(project => {
                const geometry = new THREE.SphereGeometry(0.15, 16, 16);
                const material = new THREE.MeshPhongMaterial({
                    color: 0x0a74a3,
                    emissive: 0x065a85,
                    specular: 0x4dc3ff,
                    shininess: 50
                });
                
                const node = new THREE.Mesh(geometry, material);
                
                // 计算节点位置
                const x = project.radius * Math.cos(project.angle * Math.PI / 180);
                const y = project.radius * Math.sin(project.angle * Math.PI / 180);
                node.position.set(x, y, 0);
                
                // 添加自定义属性以便识别
                node.userData = { type: 'project', code: project.code };
                
                scene.add(node);
                projectNodes.push(node);
            });
        }
        
        // 创建连接线
        function createConnectionLines() {
            projects.forEach(project => {
                const points = [];
                points.push(new THREE.Vector3(0, 0, 0)); // 地球中心
                
                // 计算节点位置
                const x = project.radius * Math.cos(project.angle * Math.PI / 180);
                const y = project.radius * Math.sin(project.angle * Math.PI / 180);
                points.push(new THREE.Vector3(x, y, 0));
                
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const material = new THREE.LineDashedMaterial({
                    color: 0x4dc3ff,
                    dashSize: 0.2,
                    gapSize: 0.1,
                    transparent: true,
                    opacity: 0.6
                });
                
                const line = new THREE.Line(geometry, material);
                line.computeLineDistances(); // 计算虚线距离
                scene.add(line);
                connectionLines.push(line);
            });
        }
        
        // 创建星星背景
        function createStarBackground() {
            const starGeometry = new THREE.BufferGeometry();
            const starMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 0.1,
                transparent: true
            });
            
            const starVertices = [];
            for (let i = 0; i < 10000; i++) {
                const x = (Math.random() - 0.5) * 2000;
                const y = (Math.random() - 0.5) * 2000;
                const z = (Math.random() - 0.5) * 2000;
                starVertices.push(x, y, z);
            }
            
            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            const stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);
        }
        
        // 窗口大小调整处理
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        // 鼠标移动处理
        function onMouseMove(event) {
            // 计算鼠标在归一化设备坐标中的位置
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            // 更新射线投射器
            raycaster.setFromCamera(mouse, camera);
            
            // 计算与射线相交的物体
            const intersects = raycaster.intersectObjects(projectNodes);
            
            // 显示信息框
            const infoBox = document.getElementById('infoBox');
            const infoTitle = document.getElementById('infoTitle');
            const infoContent = document.getElementById('infoContent');
            
            if (intersects.length > 0) {
                if (hoveredObject !== intersects[0].object) {
                    hoveredObject = intersects[0].object;
                    
                    // 找到对应的项目数据
                    const project = projects.find(p => p.code === hoveredObject.userData.code);
                    if (project) {
                        // 更新信息框内容和位置
                        infoTitle.textContent = `${project.code}: ${project.name}`;
                        infoContent.textContent = project.description;
                        infoBox.style.left = `${event.clientX + 10}px`;
                        infoBox.style.top = `${event.clientY + 10}px`;
                        infoBox.classList.add('visible');
                        
                        // 高亮对应的项目面板项
                        document.querySelectorAll('.project-item').forEach(item => {
                            if (item.dataset.project === project.code) {
                                item.classList.add('highlight');
                            } else {
                                item.classList.remove('highlight');
                            }
                        });
                    }
                }
            } else {
                if (hoveredObject) {
                    hoveredObject = null;
                    infoBox.classList.remove('visible');
                    
                    // 移除所有高亮
                    document.querySelectorAll('.project-item').forEach(item => {
                        item.classList.remove('highlight');
                    });
                }
            }
        }
        
        // 鼠标点击处理
        function onMouseClick(event) {
            // 可以添加点击交互逻辑，例如聚焦到点击的项目
        }
        
        // 动画循环
        function animate() {
            requestAnimationFrame(animate);
            
            // 地球自转
            if (earth) {
                earth.rotation.y += 0.001;
            }
            
            // 项目节点脉动效果
            const time = Date.now() * 0.001;
            projectNodes.forEach((node, index) => {
                const scale = 1 + 0.1 * Math.sin(time * 2 + index);
                node.scale.set(scale, scale, scale);
            });
            
            // 更新控制
            controls.update();
            
            // 渲染场景
            renderer.render(scene, camera);
        }
        
        // 初始化应用
        init();
    </script>
</body>
</html>